<jnt-stack cdkDropList cdkDropListOrientation="horizontal" (cdkDropListDropped)="dropped($event)" [type]="ui.stack.type.horizontal">
  <app-list *ngFor="let list of lists" [title]="list.title" cdkDrag>
    <app-ticket *ngFor="let ticket of list.tickets" [content]="ticket.content"></app-ticket>
    <jnt-button *ngIf="list.mode == mode.view; else editTicket"
                text="Add ticket"
                [width]="ui.width.fluid"
                [icon]="ui.icons.font.plus"
                [size]="ui.sizes.small"
                [scheme]="ui.schemes.secondary"
                (click)="list.mode = mode.edit"></jnt-button>

    <ng-template #editTicket>
      <jnt-form [formGroup]="ticketForm" (submitted)="addTicket(list.id)">
        <jnt-stack>
          <jnt-input formControlName="content" placeholder="Ticket content"></jnt-input>
          <jnt-stack [type]="ui.stack.type.horizontal">
            <jnt-button [icon]="ui.icons.font.plus"
                        [type]="ui.form.button.type.submit"
                        text="Add ticket">
            </jnt-button>
            <jnt-button [outline]="ui.outline.transparent"
                        [icon]="ui.icons.font.close"
                        [scheme]="ui.schemes.secondary"
                        (click)="list.mode = mode.view; this.ticketForm.reset()">
            </jnt-button>
          </jnt-stack>
        </jnt-stack>
      </jnt-form>
    </ng-template>
  </app-list>

<jnt-button *ngIf="listmode == mode.view; else editList"
              text="Add list"
              [icon]="ui.icons.font.plus"
              [width]="ui.width.fluid"
              (click)="listmode = mode.edit" add>
  </jnt-button>

  <ng-template #editList>
    <jnt-form [formGroup]="listForm" (submitted)="addList()" form>
      <jnt-stack>
        <jnt-input formControlName="title" placeholder="List title"></jnt-input>
        <jnt-stack [type]="ui.stack.type.horizontal">
          <jnt-button [icon]="ui.icons.font.plus"
                      [type]="ui.form.button.type.submit"
                      text="Add list">
          </jnt-button>
          <jnt-button [outline]="ui.outline.transparent"
                      [icon]="ui.icons.font.close"
                      [scheme]="ui.schemes.secondary"
                      (click)="listmode = mode.view; this.listForm.reset()">
          </jnt-button>
        </jnt-stack>
      </jnt-stack>
    </jnt-form>
  </ng-template>

</jnt-stack>

